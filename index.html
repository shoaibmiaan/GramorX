<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>IELTS Platform Implementation Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0c10; --card:#111319; --text:#e8eaed; --muted:#a7b0bf;
      --border:#232733; --acc:#3b82f6; --ok:#10b981; --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
    h1{margin:0 0 8px}
    .legend{color:var(--muted);margin-bottom:8px}
    .bar{display:flex;gap:12px;align-items:center;flex-wrap:wrap;
         position:sticky;top:0;background:rgba(11,12,16,.9);backdrop-filter:blur(6px);
         border-bottom:1px solid var(--border);padding:10px;margin:6px 0 12px}
    select,button{background:var(--card);color:var(--text);border:1px solid var(--border);
           border-radius:8px;padding:8px 10px}
    .stats{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0 10px}
    .stat{background:var(--card);border:1px solid var(--border);padding:6px 10px;border-radius:8px}
    table{width:100%;border-collapse:collapse}
    thead th{position:sticky;top:56px;background:var(--bg);z-index:2;color:#b9c2d0;
             text-align:left;font-weight:600;padding:10px;border-bottom:1px solid var(--border)}
    tbody td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}

    .pill{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border)}
    .pill.todo{background:#1a1d25}
    .pill.prog{background:#1e2431;border-color:#2a3346;color:#c5d2ea}
    .pill.done{background:#0f1d17;border-color:#124d3a;color:#a9efd4}
    .nowrap{white-space:nowrap}
    .muted{color:var(--muted)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
    .section-title{font-weight:700;margin-bottom:8px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:8px}
    .badge{display:inline-block;font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--border)}
    .badge.ok{background:#0f1d17;color:#a9efd4}
    .badge.warn{background:#241c0f;color:#f5d39e}
    .bar .btn{cursor:pointer}
    .sum{min-width:280px}
    input[type="date"]{background:var(--card);border:1px solid var(--border);color:var(--text);border-radius:8px;padding:6px}
    .hint{font-size:12px;color:#92a0b6;margin-top:6px}
    a.link{color:var(--acc);text-decoration:none;border-bottom:1px dashed var(--acc)}
    a.link:hover{opacity:.9}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>📋 IELTS Platform Implementation Tracker</h1>
    <div class="legend">Legend: <code>[ ]</code> Not started • <code>[~]</code> In progress • <code>[x]</code> Completed</div>

    <!-- QUICK NAV: deep links so you can go anywhere from anywhere -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">🧭 Quick Nav — Deep Links</div>
      <div class="grid">
        <div><a href="/admin" class="link">/admin</a> → Overview KPIs & drill-downs</div>
        <div><a href="/admin/teachers" class="link">/admin/teachers</a> → Teacher roster & approvals</div>
        <div><a href="/admin/students" class="link">/admin/students</a> → Cohorts, progress, impersonate</div>
        <div><a href="/admin/reports" class="link">/admin/reports</a> → Weekly & monthly exports</div>
        <div><a href="/admin/ai-queue" class="link">/admin/ai-queue</a> → AI evaluation queue monitor</div>
        <div><a href="/admin/moderation" class="link">/admin/moderation</a> → Writing/Speaking overrides</div>
        <div><a href="/admin/billing" class="link">/admin/billing</a> → Plans, credits, invoices</div>
        <div><a href="/admin/settings" class="link">/admin/settings</a> → Feature flags, roles</div>
        <div><a href="/ai?sidebar=1" class="link">/ai?sidebar=1</a> → Docked Sidebar AI anywhere</div>
        <div><a href="/speaking/simulator" class="link">/speaking/simulator</a> → Speaking Exam Room (P1)</div>
      </div>
    </div>

    <!-- START HERE: FIRST STEPS -->
    <div class="card" style="margin:12px 0 16px">
      <div class="section-title">🚦 Start Here (Day 0 → Day 7)</div>
      <div class="grid">
        <div><span class="badge ok">P1</span> <b>Unblock the build</b><br/>Fix ESLint TypeScript errors; prefer <code>@ts-expect-error</code> for known temporary issues.</div>
        <div><span class="badge ok">P2</span> <b>Listening E2E</b><br/>Route shell, timers, submit scoring, /review. Target: 1 complete test runnable.</div>
        <div><span class="badge ok">P3</span> <b>Reading fixes</b><br/>Tables not-null, RLS-safe writes; finish review page highlights.</div>
        <div><span class="badge ok">P4</span> <b>Speaking polish</b><br/>Timer & auto-record; P1 cadence; P2 prep+beeps; P3 discussion; upload/auth 401 fix; attach AI feedback.</div>
      </div>
      <div class="hint">All routes & components must follow the <b>Design System (Pages Router)</b>: DS Container/Card/Button, NavLink, dark/light, and deep links.</div>
    </div>

    <div class="bar">
      <select id="filter">
        <option value="all">Show: All</option>
        <option value="done">Completed</option>
        <option value="inprogress">In progress</option>
        <option value="notstarted">Not started</option>
      </select>
      <button class="btn" id="onlyToday">Updated: Today</button>
      <button class="btn" id="reset">Reset</button>
    </div>

    <div class="stats">
      <div class="stat">Total: <b id="tTotal">0</b></div>
      <div class="stat">Completed: <b id="tDone">0</b></div>
      <div class="stat">In progress: <b id="tProg">0</b></div>
      <div class="stat">Not started: <b id="tTodo">0</b></div>
    </div>

    <div class="card">
      <div class="section-title">Phase-1 Scope & Tasks</div>
      <table>
        <thead>
        <tr>
          <th>#</th>
          <th>Mark</th>
          <th>Item</th>
          <th>Development summary</th>
          <th class="nowrap">Updated</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <!-- ROWS INJECTED BY JS -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // ISO date helpers
    const today = new Date();
    const ISO = d => new Date(d.getTime()-d.getTimezoneOffset()*60000).toISOString().slice(0,10);
    const TODAY = ISO(today);

    // ------- DATA (status, item, optional summary, optional updated ISO) ----------
    // NOTE: We prefilled summaries/dates for top-priority items so you can start immediately.
    const tasks = [
      // 1. User Module (6)
      ["[x]", "User Module — User registration & login (email, social, phone)"],
      ["[x]", "User Module — Profile setup (goal band, country, level)"],
      ["[x]", "User Module — Role-based access (student, teacher, admin)"],
      ["[x]", "User Module — Daily streak & study calendar"],
      ["[x]", "User Module — Saved tests, bookmarked content"],
      ["[x]", "User Module — Language preference settings"],

      // 2. Learning Module (5)
      ["[ ]", "Learning Module — Structured course library (Academic & General)",
        "Categories → units → lessons. Use DS Cards grid, tokenized colors. Est: 3d for shell.", TODAY],
      ["[ ]", "Learning Module — Grammar, vocabulary, collocations lessons",
        "Markdown-backed lessons + quiz micro-checks; track completion.", TODAY],
      ["[x]", "Learning Module — IELTS strategy tips (all 4 skills)"],
      ["[ ]", "Learning Module — AI-generated practice drills",
        "Prompt templates per skill; credit guard; store AI tasks as attempts.", TODAY],
      ["[ ]", "Learning Module — Study planner",
        "Weekly plan, time commitment; DS Progress; reminders (later).", TODAY],

      // 3. Listening Module (8) — Shell partly done
      ["[~]", "Listening Module — Route shell (/listening) & test view",
        "DS Container + Card; navbar to sections.", TODAY],
      ["[~]", "Listening Module — Audio player with segments",
        "Accurate seek marks; disable replay when needed.", TODAY],
      ["[~]", "Listening Module — Question rendering (MCQ, gap fill, map)",
        "Renderer per type; DS Radio, Input; validation & autosave.", TODAY],
      ["[~]", "Listening Module — Timer & autosubmit",
        "Exam-timer component; on expiry, submit attempt.", TODAY],
      ["[~]", "Listening Module — Real-time answer input",
        "Local state + debounce save; progress nav; accessibility labels.", TODAY],
      ["[~]", "Listening Module — Band scoring & answer review",
        "Server /submit computes raw & band; persist attempt; map to bands.", TODAY],
      ["[~]", "Listening Module — Highlight correct vs user answer",
        "Review screen diff with green/red badges; show transcripts.", TODAY],

      // 7. Reading Module (6)
      ["[x]", "Reading Module — Full passage with real IELTS question types"],
      ["[ ]", "Reading Module — Support for TF/NG, Matching, MCQ, etc.",
        "Supabase adapters: options as jsonb, fix casts; renderers per type.", TODAY],
      ["[ ]", "Reading Module — Question-type-wise filtering",
        "Sidebar filter chips; counts per type; jump to next unanswered.", TODAY],
      ["[x]", "Reading Module — Timer + live progress bar"],
      ["[ ]", "Reading Module — AI answer explanation on review",
        "After submit, call /api/reading/explain per wrong answer; cache.", TODAY],
      ["[ ]", "Reading Module — Stats per passage & per type",
        "Compute accuracy by type; heatmap of time per question.", TODAY],

      // 8. Performance & Analytics Module (6)
      ["[ ]", "Performance & Analytics — Skill-wise band progression",
        "Simple line chart per skill across attempts; DS Card + recharts.", TODAY],
      ["[ ]", "Performance & Analytics — Weekly/monthly reports",
        "CRON or on-demand aggregation; email export later.", TODAY],
      ["[ ]", "Performance & Analytics — Weakness detection & suggestions",
        "Identify low-accuracy types; suggest drills; link to learning.", TODAY],
      ["[ ]", "Performance & Analytics — Leaderboard / percentile rank",
        "Opt-in anonymized ranks per mock; privacy-safe.", TODAY],
      ["[ ]", "Performance & Analytics — Study time tracker",
        "Track active time per module; streak tie-in.", TODAY],
      ["[ ]", "Performance & Analytics — Cohort/teacher reports",
        "Teacher view: cohort stats; admin view: platform stats.", TODAY],

      // 9. Writing Module (6)
      ["[~]", "Writing Module — Task 1 & Task 2 prompts"],
      ["[ ]", "Writing Module — Timer, word count, autosave"],
      ["[ ]", "Writing Module — AI feedback (coherence, grammar, vocab)"],
      ["[ ]", "Writing Module — Band score rubric + explanation"],
      ["[ ]", "Writing Module — Samples gallery with filters"],
      ["[ ]", "Writing Module — Export & share"],

      // 10. Teacher/Admin Module (6)
      ["[ ]", "Teacher/Admin Module — User monitoring dashboard",
        "Read-only charts; filter by cohort; DS table.", TODAY],
      ["[ ]", "Teacher/Admin Module — Writing & speaking review override",
        "Moderation UI to overwrite AI score; log rationale.", TODAY],
      ["[ ]", "Teacher/Admin Module — Upload custom content/tests",
        "CSV/JSON import for questions; validate schema.", TODAY],
      ["[ ]", "Teacher/Admin Module — Approve new test papers",
        "Approval queue; status badges.", TODAY],
      ["[ ]", "Teacher/Admin Module — View usage metrics & heatmaps",
        "Top pages, drop-offs; anon analytics.", TODAY],
      ["[ ]", "Teacher/Admin Module — Manage subscriptions",
        "Assign plans, credits; Stripe later.", TODAY],

      // 10a. Admin Dashboard (NEW — separate, deeper than Teacher/Admin)
      ["[ ]", "Admin Dashboard — Overview KPIs (active users, attempts, avg band, queue)",
        "Route <a class=\"link\" href=\"/admin\">/admin</a>. DS Cards with 4 KPIs → each links to drill-down.", TODAY],
      ["[ ]", "Admin Dashboard — Teachers management",
        "Route <a class=\"link\" href=\"/admin/teachers\">/admin/teachers</a>. Roster, invites, approval queue, role change.", TODAY],
      ["[ ]", "Admin Dashboard — Students management",
        "Route <a class=\"link\" href=\"/admin/students\">/admin/students</a>. Cohorts, filters, progress, contact buttons.", TODAY],
      ["[ ]", "Admin Dashboard — Impersonate user & banner",
        "Route <a class=\"link\" href=\"/admin/imp-as\">/admin/imp-as</a>. Uses magic link redirect; shows yellow banner.", TODAY],
      ["[ ]", "Admin Dashboard — Reports (weekly/monthly, export CSV)",
        "Route <a class=\"link\" href=\"/admin/reports\">/admin/reports</a>. Time range picker; export; deep links to modules.", TODAY],
      ["[ ]", "Admin Dashboard — AI evaluation queue monitor",
        "Route <a class=\"link\" href=\"/admin/ai-queue\">/admin/ai-queue</a>. See pending/scored; retry; provider status.", TODAY],
      ["[ ]", "Admin Dashboard — Moderation (writing/speaking overrides)",
        "Route <a class=\"link\" href=\"/admin/moderation\">/admin/moderation</a>. Override AI score; keep rationale log.", TODAY],
      ["[ ]", "Admin Dashboard — Billing & subscriptions",
        "Route <a class=\"link\" href=\"/admin/billing\">/admin/billing</a>. Assign plans/credits; invoices later.", TODAY],
      ["[ ]", "Admin Dashboard — Settings & feature flags",
        "Route <a class=\"link\" href=\"/admin/settings\">/admin/settings</a>. Toggle features; set roles; audit trail.", TODAY],
      ["[ ]", "Admin Dashboard — Module drill-down pages",
        "Routes like <a class=\"link\" href=\"/admin/modules/listening\">/admin/modules/listening</a> etc; heatmaps & attempts.", TODAY],
      ["[ ]", "Admin Dashboard — Access control (teachers/admins only)",
        "Guard with RoleGuard; hide links for students; DS Badge for role.", TODAY],

      // 10b. AI Sidebar Chat (Docked) — Cross-app helper
      ["[~]", "AI Sidebar — Dockable chat UI across app",
        "Open via <a class=\"link\" href=\"/ai?sidebar=1\">/ai?sidebar=1</a>; resizable drawer; DS Button to toggle.", TODAY],
      ["[~]", "AI Sidebar — Providers (Grok ✅, Gemini ⚠️ fix)",
        "Server endpoint <a class=\"link\" href=\"/api/ai/chat\">/api/ai/chat</a>; switchable model; graceful fallback.", TODAY],
      ["[ ]", "AI Sidebar — Contextual awareness",
        "Inject route, selection, user band/weaknesses; suggests next action.", TODAY],
      ["[ ]", "AI Sidebar — Function calls (actions)",
        "Commands: /explain, /rewrite, /hint, /quiz, /search; can open deep links.", TODAY],
      ["[ ]", "AI Sidebar — Voice (STT/TTS)",
        "Hold-to-talk; read answers; respect locale & accent.", TODAY],
      ["[ ]", "AI Sidebar — Save to attempts & notes",
        "Attach chat to attempt ID; export to markdown/PDF.", TODAY],
      ["[ ]", "AI Sidebar — Admin usage analytics",
        "Route <a class=\"link\" href=\"/admin/ai-usage\">/admin/ai-usage</a>. Track tokens, provider success, top intents.", TODAY],

      // 11. Community & Support Module (5)
      ["[ ]", "Community & Support — Discussion forums / study groups",
        "Light Q&A first; upvote; report abuse.", TODAY],
      ["[ ]", "Community & Support — Peer review for writing/speaking",
        "Swap samples; rubric checklist.", TODAY],
      ["[ ]", "Community & Support — Live chat with AI/teachers",
        "Start with AI only; transcripts saved.", TODAY],
      ["[ ]", "Community & Support — Ask a doubt (with AI reply + upvote)",
        "Threaded answers; accepted solution.", TODAY],
      ["[ ]", "Community & Support — Leaderboards, badges, achievements",
        "Use DS Badge variants; earn rules.", TODAY],

      // 12. Monetization Module (5)
      ["[ ]", "Monetization — Subscription tiers (free, premium, pro)",
        "Free = Compass; Starter/Booster/Master tiers; feature gates.", TODAY],
      ["[ ]", "Monetization — Credits for feedback attempts",
        "Deduct on AI calls; show remaining credits.", TODAY],
      ["[ ]", "Monetization — Discount & referral code engine",
        "Simple code table; apply at checkout.", TODAY],
      ["[ ]", "Monetization — Trial vs full feature gating",
        "Feature flags by plan; DS Alert nudges.", TODAY],
      ["[ ]", "Monetization — Payment & receipt (later)"],

      // 13. Platform Ops (5)
      ["[ ]", "Ops — Error boundary & logging",
        "Client error boundary; server logging; toast for user-friendly errors.", TODAY],
      ["[ ]", "Ops — Performance budgets",
        "Measure TTI/LCP on key pages; code-split heavy routes.", TODAY],
      ["[ ]", "Ops — Accessibility sweep",
        "Labels, focus, color contrast, keyboard traps.", TODAY],
      ["[ ]", "Ops — SEO on public pages",
        "Meta, OG, sitemap, robots; clean slugs.", TODAY],
      ["[ ]", "Ops — CI/CD & preview checks",
        "PR checks: type, lint, build; preview app.", TODAY],
    ];

    // ------- RENDER ----------
    const tbody = document.getElementById('tbody');
    const statusMap = {"[ ]": "notstarted", "[~]": "inprogress", "[x]": "completed"};
    const pillClass = s => s==="completed" ? "done" : s==="inprogress" ? "prog" : "todo";

    function render(){
      tbody.innerHTML = "";
      tasks.forEach((t, idx) => {
        const mark = statusMap[t[0]] || "notstarted";
        const summary = t[2] || "";
        const dateVal = t[3] || "";
        const tr = document.createElement('tr');
        tr.className = "row";
        tr.dataset.status = mark;
        tr.dataset.updated = dateVal || "";
        tr.innerHTML = `
          <td class="nowrap">${idx+1}</td>
          <td><span class="pill ${pillClass(mark)}">${t[0]}</span></td>
          <td>${t[1]}</td>
          <td class="muted sum" contenteditable="true" spellcheck="true">${summary}</td>
          <td class="nowrap"><input type="date" value="${dateVal}"/></td>
        `;
        tbody.appendChild(tr);
      });
      updateStats();
    }

    // ------- FILTER ----------
    const filter = document.getElementById('filter');
    const resetBtn = document.getElementById('reset');
    const onlyTodayBtn = document.getElementById('onlyToday');

    function applyFilter(){
      const val = filter.value;
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => {
        const st = r.dataset.status;
        let show = true;
        if (val === "completed" || val==="done") show = st==="completed";
        if (val === "inprogress") show = st==="inprogress";
        if (val === "notstarted") show = st==="notstarted";
        r.style.display = show ? "" : "none";
      });
    }

    filter.addEventListener('change', applyFilter);
    resetBtn.addEventListener('click', ()=>{
      filter.value="all";
      applyFilter();
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => r.style.display = "");
    });
    onlyTodayBtn.addEventListener('click', ()=>{
      const rows = tbody.querySelectorAll('tr');
      rows.forEach(r => {
        const d = r.dataset.updated || "";
        r.style.display = d===ISO(today) ? "" : "none";
      });
    });

    // ------- STATS ----------
    function updateStats(){
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const total    = rows.length;
      const completed= rows.filter(r=>r.dataset.status==="completed").length;
      const inprog   = rows.filter(r=>r.dataset.status==="inprogress").length;
      const todo     = rows.filter(r=>r.dataset.status==="notstarted").length;
      document.getElementById('tTotal').textContent = total;
      document.getElementById('tDone').textContent  = completed;
      document.getElementById('tProg').textContent  = inprog;
      document.getElementById('tTodo').textContent  = todo;
    }

    // init
    render();
    applyFilter();
  </script>
</body>
</html>
