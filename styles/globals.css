@import './tokens.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Full-height layout */
html, body, #__next { height: 100%; }

/* Light = default; Dark via .dark on <html> (next-themes) */
body { @apply font-sans text-lightText bg-lightBg overflow-x-hidden relative; }
.dark body { @apply text-foreground bg-gradient-to-br from-darker to-dark; }

/* =========================
   Headings â†’ Roboto Slab
   ========================= */
@layer base {
  /* font-slab exists because we defined theme.extend.fontFamily.slab */
  h1, h2, h3, .heading { @apply font-slab; }
}

/* =========================
   Header / Nav (GLOBAL)
   ========================= */
.header-glass { @apply text-lightText bg-white/90 backdrop-blur-md border-b border-border; }
.dark .header-glass { @apply text-foreground bg-dark/95 border-purpleVibe/20; }

/* Navigation pill with underline */
.nav-pill{
  @apply relative inline-flex items-center justify-center rounded-full px-4 py-2 transition;
  @apply text-lightText/80 hover:text-lightText;
  background: transparent;
}
.dark .nav-pill{ @apply text-foreground/90 hover:text-foreground; }

.nav-pill::after{
  content:""; position:absolute; left:50%; transform:translateX(-50%);
  bottom:-6px; height:3px; width:60%;
  background: rgb(var(--color-neonGreen));
  border-radius:9999px; opacity:0; transition:opacity .25s ease;
}
.nav-pill:hover::after{ opacity:.9; }
.nav-pill.is-active{ @apply bg-purpleVibe/10; }
.dark .nav-pill.is-active{ @apply bg-foreground/5; }
.nav-pill.is-active::after{ opacity:1; }

/* Container utility */
.container { @apply max-w-[1200px] mx-auto px-5; }

/* =========================
   Buttons
   ========================= */
.btn {
  @apply inline-flex items-center justify-center font-semibold rounded-full px-8 py-3
         relative overflow-hidden transition;
  transition-property: transform, box-shadow, filter, background-position, background-image, opacity;
  transition-duration: .35s;
  transition-timing-function: cubic-bezier(.22,.61,.36,1);
}
.btn--fx::after{
  content:""; position:absolute; inset:-2px;
  background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.22) 50%, transparent 70%);
  transform: translateX(-150%) skewX(-20deg);
  transition: transform .65s ease; pointer-events: none;
}
.btn--fx:hover::after{ transform: translateX(150%) skewX(-20deg); }
.btn--fx:hover{ transform: translateY(-2px) scale(1.02); }
.btn--fx:active{ transform: translateY(-1px) scale(0.995); }

/* Gradient drift */
.btn-primary, .btn-accent { background-size: 200% 200%; background-position: 0% 50%; }
.btn-primary:hover, .btn-accent:hover { background-position: 100% 50%; }

/* Variants */
.btn-primary  { @apply text-foreground bg-gradient-to-br from-purpleVibe to-electricBlue shadow-glow; }
.btn-primary:hover { @apply shadow-glowLg; background-image: linear-gradient(135deg,
  rgb(var(--color-electricBlue)), rgb(var(--color-purpleVibe))); }

.btn-secondary{ @apply border-2 border-primary text-primary bg-transparent; }
.dark .btn-secondary { @apply border-neonGreen text-neonGreen; }

.btn-accent   { @apply text-foreground bg-gradient-to-br from-sunsetOrange to-sunsetRed shadow-glow; }
.btn-accent:hover { @apply shadow-glowLg; background-image: linear-gradient(135deg,
  rgb(var(--color-sunsetRed)), rgb(var(--color-sunsetOrange))); }

/* =========================
   Badges / chips
   ========================= */
.streak-chip { @apply bg-primary/10 text-primary font-semibold rounded-ds px-4 py-2 flex items-center gap-2; }
.dark .streak-chip { @apply bg-purpleVibe/15 text-neonGreen; }

/* =========================
   Card surfaces
   ========================= */
.card-surface { @apply rounded-ds-2xl border bg-lightCard border-lightBorder text-lightText; }
.dark .card-surface { @apply border-purpleVibe/20 backdrop-blur-md bg-purpleVibe/10 text-foreground; }

/* =========================
   Skeleton placeholder
   ========================= */
.skeleton { @apply animate-pulse bg-border dark:bg-border/10; }

/* Glass card variant */
.card-glass {
  @apply rounded-ds-2xl backdrop-blur-xl border shadow-glowLg;
  @apply bg-white/70 text-lightText border-lightBorder;
}
.dark .card-glass {
  @apply bg-purpleVibe/10 text-foreground border-purpleVibe/20;
}

/* =========================
   Text gradients
   ========================= */
.text-gradient-primary { @apply bg-clip-text text-transparent bg-gradient-to-r from-purpleVibe to-electricBlue; }
.text-gradient-accent  { @apply bg-clip-text text-transparent bg-gradient-to-r from-neonGreen to-electricBlue; }
.text-gradient-vertical{ @apply bg-clip-text text-transparent bg-gradient-to-b from-neonGreen to-electricBlue; }

/* Footer link hover */
.footer-link{ @apply relative inline-flex items-center text-gray-600 dark:text-grayish transition-colors duration-200; }
.footer-link::after{
  content:""; position:absolute; left:0; bottom:-2px; height:2px; width:0%;
  background: linear-gradient(90deg, rgb(var(--color-purpleVibe)), rgb(var(--color-electricBlue)));
  border-radius:9999px; transition: width .25s ease;
}
.footer-link:hover{ @apply text-electricBlue; }
.footer-link:hover::after{ width:100%; }

/* Labels */
.label-neon { @apply text-neonGreen font-medium; }

/* Dark section helper */
.section-dark { @apply bg-lightBg dark:bg-gradient-to-br dark:from-dark/80 dark:to-darker/90; }

/* AI sidebar helpers */
.ai-icon-btn{
  @apply h-8 w-8 grid place-items-center rounded-md border border-border bg-card text-card-foreground hover:bg-accent hover:text-card-foreground disabled:opacity-50;
}
.ai-tab{
  @apply h-8 px-3 rounded-md border border-border bg-card text-caption text-card-foreground hover:bg-accent hover:text-foreground;
}
.ai-tab.is-active{ @apply bg-primary text-primary-foreground; }

/* Code block surface for AI messages */
.ai-code-block{ @apply bg-lightCard border border-lightBorder text-lightText/80; }
.dark .ai-code-block{ @apply bg-purpleVibe/10 border-purpleVibe/20 text-foreground/80; }

/* AI sidebar split view */
:root { --gx-ai-right: 0px; --gx-ai-bottom: 0px; }
html.gx-ai-open #__next { padding-right: var(--gx-ai-right); box-sizing: border-box; }
@media (max-width: 767px) {
  html.gx-ai-open-bottom #__next { padding-bottom: var(--gx-ai-bottom); box-sizing: border-box; }
}
